<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="/rust-prime/images/git.png"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>基于语义化版本的项目版本声明与管理 | rust教程</title><meta name="description" content="一个简单的rust教程✨">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/rust-prime/assets/style.debece91.css">
    <link rel="modulepreload" href="/rust-prime/assets/app.a489c551.js"><link rel="modulepreload" href="/rust-prime/assets/cargo-detailed-cfg.html.c6b6f176.js"><link rel="modulepreload" href="/rust-prime/assets/cargo-detailed-cfg.html.df8a0580.js"><link rel="modulepreload" href="/rust-prime/assets/plugin-vue_export-helper.21dcd24c.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/rust-prime/" class="home-link"><img class="logo" src="/rust-prime/images/git.png" alt="rust教程"><!----><span class="site-name hide-in-pad">rust教程</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/rust-prime/RustPrimer/" class="nav-link active" aria-label="rust指南"><i class="icon iconfont icon-creative"></i>rust指南<!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/yzqbooks/rust-prime" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" aria-labelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" aria-labelledby="outlook"><title id="outlook" lang="en">outlook icon</title><g fill="currentColor"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></g></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索文档" autocomplete="off" spellcheck="false" value><!----></form><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/rust-prime/RustPrimer/" class="nav-link sidebar-link sidebar-page" aria-label="RustPrimer"><!---->RustPrimer<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">action</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">any</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">appendix</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">attr-and-compiler-arg</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">cargo-detailed-cfg</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/rust-prime/RustPrimer/cargo-detailed-cfg/" class="nav-link sidebar-link sidebar-page" aria-label="cargo-detailed-cfg"><!---->cargo-detailed-cfg<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="基于语义化版本的项目版本声明与管理"><!---->基于语义化版本的项目版本声明与管理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#package-段落" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="[package]段落"><!---->[package]段落<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#依赖的详细配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="依赖的详细配置"><!---->依赖的详细配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#自定义编译器调用方式模板详细参数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自定义编译器调用方式模板详细参数"><!---->自定义编译器调用方式模板详细参数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#features-段落" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="[features]段落"><!---->[features]段落<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#关于测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="关于测试"><!---->关于测试<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#配置构建目标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="配置构建目标"><!---->配置构建目标<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">cargo-projects-manager</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">closure</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">coding-style</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">collections</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">concurrency-parallel-thread</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">cover</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">data-structure</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">editors</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">error-handling</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ffi</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">flow</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">function</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">generic</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">heap-stack</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">images</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">install</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">intoborrow</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">io</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">iterator</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">macro</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">marker</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">match</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">module</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">operator-overloading</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ownership-system</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">quickstart</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">rcarc</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">safe</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">src</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">std</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><a href="/rust-prime/RustPrimer/SUMMARY.html" class="nav-link sidebar-link sidebar-page" aria-label="Summary"><!---->Summary<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">testing</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">trait</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">type</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">unsafe-rawpointer</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">关于rust</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><a href="/rust-prime/RustPrimer/TOC.html" class="nav-link sidebar-link sidebar-page" aria-label="目录"><!---->目录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->基于语义化版本的项目版本声明与管理</h1><div class="page-info"><!----><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" aria-labelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年5月2日</span><meta property="datePublished" content="2022-05-02T18:39:38.000Z"></span><!----><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" aria-labelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>大约 8 分钟</span><meta property="timeRequired" content="PT8M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#package-段落" class="router-link-active router-link-exact-active toc-link level2">[package]段落</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#依赖的详细配置" class="router-link-active router-link-exact-active toc-link level2">依赖的详细配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#自定义编译器调用方式模板详细参数" class="router-link-active router-link-exact-active toc-link level2">自定义编译器调用方式模板详细参数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#features-段落" class="router-link-active router-link-exact-active toc-link level2">[features]段落</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#关于测试" class="router-link-active router-link-exact-active toc-link level2">关于测试</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/rust-prime/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.html#配置构建目标" class="router-link-active router-link-exact-active toc-link level2">配置构建目标</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><p>筒子们好，我们又见面了。之前第5章，我们一起探讨了cargo的一些常用的基本技能。通过第5章的学习，大家基本能解决日常项目开发中遇到的大多数问题。但实际上，cargo提供给我们所使用的功能不仅限于此。我只想说一个字：cargo很好很强大，而且远比你想象的强大。 本章将深入探讨cargo的一些细节问题，这包括以下几个方面：</p><ul><li>基于语义化版本的项目版本声明与管理</li><li>cargo的toml描述文件配置字段详细参考</li></ul><h1 id="基于语义化版本的项目版本声明与管理" tabindex="-1"><a class="header-anchor" href="#基于语义化版本的项目版本声明与管理" aria-hidden="true">#</a> 基于语义化版本的项目版本声明与管理</h1><p>我们在使用toml描述文件对项目进行配置时，经常会遇到项目版本声明及管理的问题，比如：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;libevent_sys&quot;</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.1.0&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">libc</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.2&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这里package段落中的version字段的值，以及dependencies段落中的libc字段的值，这些值的写法，都涉及到语义化版本控制的问题。语义化版本控制是用一组简单的规则及条件来约束版本号的配置和增长。这些规则是根据（但不局限于）已经被各种封闭、开放源码软件所广泛使用的惯例所设计。简单来说，语义化版本控制遵循下面这些规则：</p><ul><li>版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</li></ul><ol><li>主版本号：当你做了不兼容的 API 修改，</li><li>次版本号：当你做了向下兼容的功能性新增，</li><li>修订号：当你做了向下兼容的问题修正。</li></ol><ul><li>先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。</li></ul><p>关于语义化版本控制的具体细节问题，大家可以参考<a href="http://semver.org/lang/zh-CN/" target="_blank" rel="noopener noreferrer">这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，我不再赘述。</p><h1 id="cargo的toml描述文件配置字段详细参考" tabindex="-1"><a class="header-anchor" href="#cargo的toml描述文件配置字段详细参考" aria-hidden="true">#</a> cargo的toml描述文件配置字段详细参考</h1><h2 id="package-段落" tabindex="-1"><a class="header-anchor" href="#package-段落" aria-hidden="true">#</a> [package]段落</h2><p>啥也不多说了，直接上例子，大家注意我在例子中的中文解释，个人觉得这样比较一目了然：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
 <span class="token comment"># 软件包名称，如果需要在别的地方引用此软件包，请用此名称。</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;hello_world&quot;</span>

<span class="token comment"># 当前版本号，这里遵循semver标准，也就是语义化版本控制标准。</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.1.0&quot;</span>    <span class="token comment"># the current version, obeying semver</span>

<span class="token comment"># 软件所有作者列表</span>
<span class="token key property">authors</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;you@example.com&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># 非常有用的一个字段，如果要自定义自己的构建工作流，</span>
<span class="token comment"># 尤其是要调用外部工具来构建其他本地语言（C、C++、D等）开发的软件包时。</span>
<span class="token comment"># 这时，自定义的构建流程可以使用rust语言，写在&quot;build.rs&quot;文件中。</span>
<span class="token key property">build</span> <span class="token punctuation">=</span> <span class="token string">&quot;build.rs&quot;</span>

<span class="token comment"># 显式声明软件包文件夹内哪些文件被排除在项目的构建流程之外，</span>
<span class="token comment"># 哪些文件包含在项目的构建流程中</span>
<span class="token key property">exclude</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;build/**/*.o&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;doc/**/*.html&quot;</span><span class="token punctuation">]</span>
<span class="token key property">include</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Cargo.toml&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># 当软件包在向公共仓库发布时出现错误时，使能此字段可以阻止此错误。</span>
<span class="token key property">publish</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>

<span class="token comment"># 关于软件包的一个简短介绍。</span>
<span class="token key property">description</span> <span class="token punctuation">=</span> <span class="token string">&quot;...&quot;</span>

<span class="token comment"># 下面这些字段标明了软件包仓库的更多信息</span>
<span class="token key property">documentation</span> <span class="token punctuation">=</span> <span class="token string">&quot;...&quot;</span>
<span class="token key property">homepage</span> <span class="token punctuation">=</span> <span class="token string">&quot;...&quot;</span>
<span class="token key property">repository</span> <span class="token punctuation">=</span> <span class="token string">&quot;...&quot;</span>

<span class="token comment"># 顾名思义，此字段指向的文件就是传说中的ReadMe，</span>
<span class="token comment"># 并且，此文件的内容最终会保存在注册表数据库中。</span>
<span class="token key property">readme</span> <span class="token punctuation">=</span> <span class="token string">&quot;...&quot;</span>

<span class="token comment"># 用于分类和检索的关键词。</span>
<span class="token key property">keywords</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># 软件包的许可证，必须是cargo仓库已列出的已知的标准许可证。</span>
<span class="token key property">license</span> <span class="token punctuation">=</span> <span class="token string">&quot;...&quot;</span>

<span class="token comment"># 软件包的非标许可证书对应的文件路径。</span>
<span class="token key property">license-file</span> <span class="token punctuation">=</span> <span class="token string">&quot;...&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="依赖的详细配置" tabindex="-1"><a class="header-anchor" href="#依赖的详细配置" aria-hidden="true">#</a> 依赖的详细配置</h2><p>最直接的方式在之前第五章探讨过，这里不在赘述，例如这样：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">hammer</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.5.0&quot;</span>
<span class="token key property">color</span> <span class="token punctuation">=</span> <span class="token string">&quot;&gt; 0.6.0, &lt; 0.8.0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>与平台相关的依赖定义格式不变，不同的是需要定义在[target]字段下。例如：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token comment"># 注意，此处的cfg可以使用not、any、all等操作符任意组合键值对。</span>
<span class="token comment"># 并且此用法仅支持cargo 0.9.0（rust 1.8.0）以上版本。</span>
<span class="token comment"># 如果是windows平台，则需要此依赖。</span>
<span class="token punctuation">[</span><span class="token table class-name">target.&#39;cfg(windows)&#39;.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">winhttp</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4.0&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">target.&#39;cfg(unix)&#39;.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">openssl</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0.1&quot;</span>

<span class="token comment">#如果是32位平台，则需要此依赖。</span>
<span class="token punctuation">[</span><span class="token table class-name">target.&#39;cfg(target_pointer_width = &quot;32&quot;)&#39;.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">native</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;native/i686&quot;</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token table class-name">target.&#39;cfg(target_pointer_width = &quot;64&quot;)&#39;.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">native</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;native/i686&quot;</span> <span class="token punctuation">}</span>

<span class="token comment"># 另一种写法就是列出平台的全称描述</span>
<span class="token punctuation">[</span><span class="token table class-name">target.x86_64-pc-windows-gnu.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">winhttp</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4.0&quot;</span>
<span class="token punctuation">[</span><span class="token table class-name">target.i686-unknown-linux-gnu.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">openssl</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0.1&quot;</span>

<span class="token comment"># 如果使用自定义平台，请将自定义平台文件的完整路径用双引号包含</span>
<span class="token punctuation">[</span><span class="token table class-name">target.&quot;x86_64/windows.json&quot;.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">winhttp</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4.0&quot;</span>
<span class="token punctuation">[</span><span class="token table class-name">target.&quot;i686/linux.json&quot;.dependencies</span><span class="token punctuation">]</span>
<span class="token key property">openssl</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0.1&quot;</span>
<span class="token key property">native</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;native/i686&quot;</span> <span class="token punctuation">}</span>
<span class="token key property">openssl</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0.1&quot;</span>
<span class="token key property">native</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;native/x86_64&quot;</span> <span class="token punctuation">}</span>

<span class="token comment"># [dev-dependencies]段落的格式等同于[dependencies]段落，</span>
<span class="token comment"># 不同之处在于，[dependencies]段落声明的依赖用于构建软件包，</span>
<span class="token comment"># 而[dev-dependencies]段落声明的依赖仅用于构建测试和性能评估。</span>
<span class="token comment"># 此外，[dev-dependencies]段落声明的依赖不会传递给其他依赖本软件包的项目</span>
<span class="token punctuation">[</span><span class="token table class-name">dev-dependencies</span><span class="token punctuation">]</span>
<span class="token key property">iron</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.2&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="自定义编译器调用方式模板详细参数" tabindex="-1"><a class="header-anchor" href="#自定义编译器调用方式模板详细参数" aria-hidden="true">#</a> 自定义编译器调用方式模板详细参数</h2><p>cargo内置五种编译器调用模板，分别为dev、release、test、bench、doc，分别用于定义不同类型生成目标时的编译器参数，如果我们自己想改变这些编译模板，可以自己定义相应字段的值，例如（注意：下述例子中列出的值均为此模板字段对应的系统默认值）：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token comment"># 开发模板, 对应`cargo build`命令</span>
<span class="token punctuation">[</span><span class="token table class-name">profile.dev</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token number">0</span>  <span class="token comment"># 控制编译器的 --opt-level 参数，也就是优化参数</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>   <span class="token comment"># 控制编译器是否开启 `-g` 参数</span>
<span class="token key property">rpath</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>  <span class="token comment"># 控制编译器的 `-C rpath` 参数</span>
<span class="token key property">lto</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>    <span class="token comment"># 控制`-C lto` 参数，此参数影响可执行文件和静态库的生成，</span>
<span class="token key property">debug-assertions</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>  <span class="token comment"># 控制调试断言是否开启</span>
<span class="token key property">codegen-units</span> <span class="token punctuation">=</span> <span class="token number">1</span> <span class="token comment"># 控制编译器的 `-C codegen-units` 参数。注意，当`lto = true`时，此字段值被忽略</span>

<span class="token comment"># 发布模板, 对应`cargo build --release`命令</span>
<span class="token punctuation">[</span><span class="token table class-name">profile.release</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token number">3</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">rpath</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">lto</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">debug-assertions</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">codegen-units</span> <span class="token punctuation">=</span> <span class="token number">1</span>

<span class="token comment"># 测试模板，对应`cargo test`命令</span>
<span class="token punctuation">[</span><span class="token table class-name">profile.test</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token number">0</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token key property">rpath</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">lto</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">debug-assertions</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token key property">codegen-units</span> <span class="token punctuation">=</span> <span class="token number">1</span>

<span class="token comment"># 性能评估模板，对应`cargo bench`命令</span>
<span class="token punctuation">[</span><span class="token table class-name">profile.bench</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token number">3</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">rpath</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">lto</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">debug-assertions</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">codegen-units</span> <span class="token punctuation">=</span> <span class="token number">1</span>

<span class="token comment"># 文档模板，对应`cargo doc`命令</span>
<span class="token punctuation">[</span><span class="token table class-name">profile.doc</span><span class="token punctuation">]</span>
<span class="token key property">opt-level</span> <span class="token punctuation">=</span> <span class="token number">0</span>
<span class="token key property">debug</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token key property">rpath</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">lto</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
<span class="token key property">debug-assertions</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token key property">codegen-units</span> <span class="token punctuation">=</span> <span class="token number">1</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>需要注意的是，当调用编译器时，只有位于调用最顶层的软件包的模板文件有效，其他的子软件包或者依赖软件包的模板定义将被顶层软件包的模板覆盖。</p><h2 id="features-段落" tabindex="-1"><a class="header-anchor" href="#features-段落" aria-hidden="true">#</a> [features]段落</h2><p>[features]段落中的字段被用于条件编译选项或者是可选依赖。例如：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;awesome&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">features</span><span class="token punctuation">]</span>
<span class="token comment"># 此字段设置了可选依赖的默认选择列表，</span>
<span class="token comment"># 注意这里的&quot;session&quot;并非一个软件包名称，</span>
<span class="token comment"># 而是另一个featrue字段session</span>
<span class="token key property">default</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;uglifier&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;session&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># 类似这样的值为空的feature一般用于条件编译，</span>
<span class="token comment"># 类似于`#[cfg(feature = &quot;go-faster&quot;)]`。</span>
<span class="token key property">go-faster</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment"># 此feature依赖于bcrypt软件包，</span>
<span class="token comment"># 这样封装的好处是未来可以对secure-password此feature增加可选项目。</span>
<span class="token key property">secure-password</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;bcrypt&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># 此处的session字段导入了cookie软件包中的feature段落中的session字段</span>
<span class="token key property">session</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;cookie/session&quot;</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token comment"># 必要的依赖</span>
<span class="token key property">cookie</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.2.0&quot;</span>
<span class="token key property">oauth</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.1.0&quot;</span>
<span class="token key property">route-recognizer</span> <span class="token punctuation">=</span> <span class="token string">&quot;=2.1.0&quot;</span>

<span class="token comment"># 可选依赖</span>
<span class="token key property">jquery</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.0.2&quot;</span><span class="token punctuation">,</span> <span class="token key property">optional</span> <span class="token punctuation">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token key property">uglifier</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.5.3&quot;</span><span class="token punctuation">,</span> <span class="token key property">optional</span> <span class="token punctuation">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token key property">bcrypt</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token key property">optional</span> <span class="token punctuation">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token key property">civet</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token key property">optional</span> <span class="token punctuation">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>如果其他软件包要依赖使用上述awesome软件包，可以在其描述文件中这样写：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies.awesome</span><span class="token punctuation">]</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.3.5&quot;</span>
<span class="token key property">default-features</span> <span class="token punctuation">=</span> <span class="token boolean">false</span> <span class="token comment"># 禁用awesome 的默认features</span>
<span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;secure-password&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;civet&quot;</span><span class="token punctuation">]</span> <span class="token comment"># 使用此处列举的各项features</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用features时需要遵循以下规则：</p><ul><li>feature名称在本描述文件中不能与出现的软件包名称冲突</li><li>除了default feature，其他所有的features均是可选的</li><li>features不能相互循环包含</li><li>开发依赖包不能包含在内</li><li>features组只能依赖于可选软件包</li></ul><p>features的一个重要用途就是，当开发者需要对软件包进行最终的发布时，在进行构建时可以声明暴露给终端用户的features，这可以通过下述命令实现：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ cargo build --release --features &quot;shumway pdf&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="关于测试" tabindex="-1"><a class="header-anchor" href="#关于测试" aria-hidden="true">#</a> 关于测试</h2><p>当运行cargo test命令时，cargo将会按做以下事情：</p><ul><li>编译并运行软件包源代码中被#[cfg(test)] 所标志的单元测试</li><li>编译并运行文档测试</li><li>编译并运行集成测试</li><li>编译examples</li></ul><h2 id="配置构建目标" tabindex="-1"><a class="header-anchor" href="#配置构建目标" aria-hidden="true">#</a> 配置构建目标</h2><p>所有的诸如[[bin]], [lib], [[bench]], [[test]]以及 [[example]]等字段，均提供了类似的配置，以说明构建目标应该怎样被构建。例如（下述例子中[lib]段落中各字段值均为默认值）：</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">lib</span><span class="token punctuation">]</span>
<span class="token comment"># 库名称，默认与项目名称相同</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;foo&quot;</span>

<span class="token comment"># 此选项仅用于[lib]段落，其决定构建目标的构建方式，</span>
<span class="token comment"># 可以取dylib, rlib, staticlib 三种值之一，表示生成动态库、r库或者静态库。</span>
<span class="token key property">crate-type</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;dylib&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># path字段声明了此构建目标相对于cargo.toml文件的相对路径</span>
<span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;src/lib.rs&quot;</span>

<span class="token comment"># 单元测试开关选项</span>
<span class="token key property">test</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>

<span class="token comment"># 文档测试开关选项</span>
<span class="token key property">doctest</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>

<span class="token comment"># 性能评估开关选项</span>
<span class="token key property">bench</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>

<span class="token comment"># 文档生成开关选项</span>
<span class="token key property">doc</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>

<span class="token comment"># 是否构建为编译器插件的开关选项</span>
<span class="token key property">plugin</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>

<span class="token comment"># 如果设置为false，`cargo test`将会忽略传递给rustc的--test参数。</span>
<span class="token key property">harness</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/yzqbooks/rust-prime/edit/main/docs/RustPrimer/cargo-detailed-cfg/cargo-detailed-cfg.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" aria-labelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/5/2 18:39:38</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: yzqdev@outlook.com">yzqdev</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/rust-prime/RustPrimer/cargo-detailed-cfg/" class="nav-link active prev" aria-label="cargo-detailed-cfg"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->cargo-detailed-cfg</div></a><!----></nav><!----><!----></main><!--]--><footer class="footer-wrapper"><div class="footer">powered by <a href='https://vuepress-theme-hope.github.io/v2/'>vuepress-theme-home</a></div><!----></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/rust-prime/assets/app.a489c551.js" defer></script>
  </body>
</html>
